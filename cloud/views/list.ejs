<!DOCTYPE html>
<html>
<head>
    <% include partials/templates/head.ejs %>
    <% include partials/templates/scripts.ejs %>
</head>
<body>
<% include partials/templates/header.ejs %>
<% include partials/templates/nav.ejs %>
<section class="container">
    <div class="row">
        <div class="col-xs-6">
            <h3><span class="label label-default">My Books:</span></h3>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-6">
            <p>There Is <%= books.length %> Items</p>
            <div id="booksList" class="list-group books-list">
                <% if (books.length) { %>
                <% for(var i = 0; books[i]; i++) { %>
                <a href="#" class="list-group-item" data-id="<%= books[i].get('objectId') %>"><%= books[i].get("title") %></a>
                <% } %>
                <% } %>
            </div>
        </div>
    </div>

    <button type="submit" class="btn btn-primary" data-toggle="modal" data-target="#addNewBookModal">Add New Book</button>

    <!-- AddNewItem View -->
    <div id="addNewBookModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Save New Book</h4>
                </div>
                <div class="modal-body">
                    <form action="/saveNewBook" method="post">
                        <div class="form-group">
                            <label for="title">New Book Title</label>
                            <input id="title" class="form-control" type="text" name="title" placeholder="Title"/>
                        </div>
                        <div class="form-group">
                            <label for="author">New Book Author</label>
                            <input id="author" class="form-control" type="text" name="author" placeholder="Author"/>
                        </div>
                        <div class="form-group">
                            <label for="description">New Book Description</label>
                            <textarea id="description" class="form-control" name="description" rows="3" placeholder="Description"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="imageFile">New Book Cover</label>
                            <input type="file" id="imageFile">
                            <p class="help-block">choose the cover image</p>
                        </div>
                        <!--<div class="form-group">
                            <button type="submit" class="btn btn-default">Add Book</button>
                        </div>-->
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button id="saveItem" type="button" class="btn btn-primary">Save Book</button>
                </div>
            </div>
        </div>
    </div>

    <!-- book details-->
    <div id="bookModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Book Details</h4>
                </div>
                <div class="modal-body">
                    <form action="/saveNewBook" method="post">
                        <div class="form-group">
                            <p>New Book Title</p>

                        </div>
                        <div class="form-group">
                            <p>New Book Author</p>

                        </div>
                        <div class="form-group">
                            <p>New Book Description</p>

                        </div>
                        <div class="form-group">
                            <p>New Book Cover</p>

                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button id="" type="button" class="btn btn-primary">Ok</button>
                </div>
            </div>
        </div>
    </div>
</section>

<% include partials/templates/footer.ejs %>

<script type="text/javascript">
    new AddNewItem({
        el: "#addNewBookModal"
    });

    var showDetailsBtn = $("#booksList a");
    showDetailsBtn.on("click", function () {
        $('#bookModal').modal();
    });

</script>

</body>
</html>
